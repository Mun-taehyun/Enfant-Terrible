EnfantTerrible Spring Boot Test Cases (Postman 수동 테스트 기준)

공통
- Base URL: http://localhost:8080
- 기본 헤더: Content-Type: application/json
- 인증 헤더: Authorization: Bearer {{ACCESS_TOKEN}}
- 관리자 인증 헤더: Authorization: Bearer {{ADMIN_ACCESS_TOKEN}}
- 공통 응답 검증: success, message, data

=============================
TC-00 서버/응답 포맷 확인
=============================
- 목적: ApiResponse 포맷 확인
- 방법: permitAll 엔드포인트 중 하나 호출
  - GET /api/banners
- 기대결과
  - HTTP 200
  - body.success = true
  - body.data != null

=============================
TC-01 회원가입(정상)
=============================
- 요청
  - POST /api/users/signup
  - Body
    {
      "email": "user1@example.com",
      "password": "Password1234",
      "name": "유저1",
      "tel": "01012345678",
      "zipCode": "12345",
      "addressBase": "서울시 ...",
      "addressDetail": "101동 1001호"
    }
- 기대결과
  - HTTP 200
  - success=true
  - message=회원가입 완료

=============================
TC-02 로그인(정상) 및 토큰 저장
=============================
- 요청
  - POST /api/auth/login
  - Body
    {
      "email": "user1@example.com",
      "password": "Password1234"
    }
- 기대결과
  - HTTP 200
  - data.accessToken 존재
  - data.refreshToken 존재
- 후속
  - Postman 변수 {{ACCESS_TOKEN}} = data.accessToken 저장

=============================
TC-03 내 정보 조회(인증 성공)
=============================
- 요청
  - GET /api/users/me
  - Header: Authorization: Bearer {{ACCESS_TOKEN}}
- 기대결과
  - HTTP 200
  - success=true
  - data.email/name/tel 등 존재

=============================
TC-04 내 정보 조회(인증 실패)
=============================
- 요청
  - GET /api/users/me
  - Header 미포함
- 기대결과
  - HTTP 401
  - body.success=false
  - message: "유효하지 않거나 만료된 토큰입니다." (SecurityConfig의 EntryPoint)

=============================
TC-05 프로필 수정(정상)
=============================
- 요청
  - PUT /api/users/me
  - Header: Authorization: Bearer {{ACCESS_TOKEN}}
  - Body
    {
      "name": "유저1-수정",
      "tel": "01011112222",
      "zipCode": "54321",
      "addressBase": "부산시 ...",
      "addressDetail": "202동 2002호"
    }
- 기대결과
  - HTTP 200
  - success=true

=============================
TC-06 비밀번호 변경(정상)
=============================
- 요청
  - PUT /api/users/me/password
  - Header: Authorization: Bearer {{ACCESS_TOKEN}}
  - Body
    {
      "currentPassword": "Password1234",
      "newPassword": "Password5678"
    }
- 기대결과
  - HTTP 200
  - success=true

=============================
TC-07 장바구니 담기/조회/수정/삭제
=============================
사전조건
- skuId가 DB에 존재해야 함 (관리자 SKU 조회로 확인 가능)

1) 담기
- POST /api/cart/items
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- Body
  { "skuId": 1, "quantity": 2 }
- 기대결과: HTTP 200, success=true

2) 조회
- GET /api/cart/items
- 기대결과: HTTP 200, data에 항목 포함

3) 수량 변경
- PUT /api/cart/items/{cartItemId}
- Body
  { "quantity": 3 }
- 기대결과: HTTP 200

4) 개별 삭제
- DELETE /api/cart/items/{cartItemId}
- 기대결과: HTTP 200

5) 전체 비우기
- DELETE /api/cart/items
- 기대결과: HTTP 200

=============================
TC-08 주문 생성(장바구니 기반)
=============================
사전조건
- 장바구니에 아이템이 1개 이상 존재

- 요청
  - POST /api/orders/from-cart
  - Header: Authorization: Bearer {{ACCESS_TOKEN}}
  - Body
    {
      "receiverName": "수령인",
      "receiverPhone": "01099998888",
      "zipCode": "12345",
      "addressBase": "서울시 ...",
      "addressDetail": "..."
    }
- 기대결과
  - HTTP 200
  - data에 orderId/orderCode 등 생성 결과 존재

=============================
TC-09 주문 생성(바로구매)
=============================
사전조건
- productId 및 optionValueIds 조합이 유효해야 함
- sku 조회/resolve로 사전 확인 가능

- 요청
  - POST /api/orders/direct
  - Header: Authorization: Bearer {{ACCESS_TOKEN}}
  - Body
    {
      "productId": 1,
      "optionValueIds": [1,2],
      "quantity": 1,
      "receiverName": "수령인",
      "receiverPhone": "01099998888",
      "zipCode": "12345",
      "addressBase": "서울시 ...",
      "addressDetail": "..."
    }
- 기대결과
  - HTTP 200

=============================
TC-10 결제 승인/취소(PortOne 연동)
=============================
주의
- PortOne 결제 ID, 시크릿 키, 실제 결제 상태가 맞아야 성공함

1) 승인
- POST /api/payments/confirm
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- Body
  {
    "paymentId": "portone_payment_id",
    "orderId": "orderCode",
    "amount": 10000
  }
- 기대결과
  - 성공 시 HTTP 200, paymentStatus=SUCCESS 등
  - 실패 시 BusinessException 메시지 확인

2) 취소
- POST /api/payments/cancel
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- Body
  {
    "paymentId": "portone_payment_id",
    "orderId": "orderCode",
    "amount": 10000,
    "reason": "고객 요청"
  }
- 기대결과
  - HTTP 200

=============================
TC-11 포인트 조회/사용/적립
=============================
1) 잔액
- GET /api/points/me
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- 기대결과: HTTP 200

2) 히스토리
- GET /api/points/me/history?page=1&size=20
- 기대결과: HTTP 200

3) 적립
- POST /api/points/me/earn
- Body
  { "amount": 100, "reason": "테스트" }
- 기대결과: HTTP 200

4) 사용
- POST /api/points/me/use
- Body
  { "amount": 50, "reason": "테스트" }
- 기대결과: HTTP 200

=============================
TC-12 리뷰 CRUD
=============================
1) 목록(공개)
- GET /api/products/{productId}/reviews?page=1&size=20
- 기대결과: HTTP 200

2) 작성(인증)
- POST /api/products/{productId}/reviews
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- Body
  { "orderId": 1, "rating": 5, "content": "좋아요" }
- 기대결과: HTTP 200

3) 수정(인증)
- PUT /api/reviews/{reviewId}
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- Body
  { "rating": 4, "content": "수정" }
- 기대결과: HTTP 200

4) 삭제(인증)
- DELETE /api/reviews/{reviewId}
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- 기대결과: HTTP 200

=============================
TC-13 QnA
=============================
1) 내 방 조회/생성
- GET /api/qna/room
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- 기대결과: HTTP 200, data.roomId 등

2) 메시지 조회
- GET /api/qna/messages?roomId={roomId}&limit=30
- Header: Authorization: Bearer {{ACCESS_TOKEN}}
- 기대결과: HTTP 200

=============================
TC-20 관리자 권한(403 확인)
=============================
- 요청
  - GET /api/admin/users
  - Header: Authorization: Bearer {{ACCESS_TOKEN}} (일반 유저 토큰)
- 기대결과
  - HTTP 403
  - body.message = "접근 권한이 없습니다." (SecurityConfig accessDeniedHandler)

=============================
TC-21 관리자: 사용자 목록/상세/상태 변경
=============================
사전조건
- ADMIN 권한 토큰 필요 ({{ADMIN_ACCESS_TOKEN}})

1) 목록
- GET /api/admin/users?page=1&size=20
- Header: Authorization: Bearer {{ADMIN_ACCESS_TOKEN}}
- 기대결과: HTTP 200

2) 상세
- GET /api/admin/users/{userId}
- 기대결과: HTTP 200

3) 상태 변경
- PATCH /api/admin/users/{userId}/status
- Body
  { "status": "SUSPENDED" }
- 기대결과: HTTP 200

=============================
TC-22 관리자: 카테고리
=============================
1) 트리
- GET /api/admin/categories

2) 생성
- POST /api/admin/categories
- Body
  { "parentId": null, "name": "테스트카테고리", "sortOrder": 1 }

3) 수정
- PATCH /api/admin/categories/{categoryId}
- Body
  { "categoryId": 0, "name": "수정", "sortOrder": 1, "isActive": "Y" }
  - 주의: controller에서 path categoryId로 overwrite

4) 활성 변경
- PATCH /api/admin/categories/{categoryId}/active?isActive=Y

5) 정렬 변경
- PATCH /api/admin/categories/{categoryId}/sort-order?sortOrder=10

6) 이동
- PATCH /api/admin/categories/{categoryId}/move?parentId=1

7) 삭제
- DELETE /api/admin/categories/{categoryId}

=============================
TC-23 관리자: 상품/옵션/SKU
=============================
1) 상품 목록
- GET /api/admin/products?page=1&size=20

2) 상품 생성
- POST /api/admin/products
- Body
  {
    "productCode": "P-TEST-001",
    "categoryId": 1,
    "name": "테스트상품",
    "basePrice": 10000,
    "status": "ON_SALE",
    "thumbnailFileId": null
  }

3) 옵션그룹 생성
- POST /api/admin/products/options/groups
- Body
  { "productId": 1, "name": "색상", "sortOrder": 1 }

4) 옵션값 생성
- POST /api/admin/products/options/values
- Body
  { "optionGroupId": 1, "value": "빨강", "sortOrder": 1 }

5) SKU 목록
- GET /api/admin/products/skus?productId=1

6) SKU 수정
- PUT /api/admin/products/skus/{skuId}
- Body
  {
    "productId": 1,
    "price": 12000,
    "stock": 100,
    "status": "ON_SALE",
    "optionValueIds": [1,2]
  }

=============================
TC-24 관리자: 주문/결제/포인트/게시글/배너/팝업
=============================
- 각 리소스별 list/detail/create/update/delete(또는 상태 변경) 호출
- 기대결과
  - ADMIN 토큰으로 HTTP 200
  - 일반 토큰으로 HTTP 403

메모
- 본 문서는 "실제 호출"을 수행하지 않고, 코드 기준으로 Postman 입력 형태 및 검증 포인트를 정리한 문서임.
